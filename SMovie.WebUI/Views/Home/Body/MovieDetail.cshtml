@model SMovie.Domain.Models.MovieDetail
@using SMovie.WebUI.Constants
@using SMovie.Domain.Models
@using SMovie.Domain.Enum

@{
    var movie = Model;
}

<main class="main-content">

    <!-- Banner Start -->
    <div class="iq-main-slider site-video">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-12">
            <div class="pt-0">
              <video id="my-video" poster="https://i.ytimg.com/vi_webp/rKVEoyTedv4/maxresdefault.webp"
                class="video-js vjs-big-play-centered w-100" controls preload="auto" autoplay
                data-setup='{ "techOrder": ["youtube"], "sources": [{ "type": "video/youtube", "src": "@(Model.Trailer)"}], "youtube": { "iv_load_policy": 1 } }'>
                <source src="home/images/video/sample-video.mp4" type="video/mp4" />
                <source src="MY_VIDEO.html" type="video/webm" />
              </video>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Banner End -->

    <div class="details-part">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-12">
            <!-- Movie Description Start-->
            <div class="trending-info mt-4 pt-0 pb-4">
              <div class="row">
                <div class="col-md-9 col-12 mb-auto">
                  <div class="d-block d-lg-flex align-items-center">
                    <h2
                      class="trending-text fw-bold texture-text text-uppercase my-0 fadeInLeft animated d-inline-block"
                      data-animation-in="fadeInLeft" data-delay-in="0.6" style="opacity: 1; animation-delay: 0.6s">
                      @movie.EnglishName
                    </h2>
                    <div class="slider-ratting d-flex align-items-center ms-lg-3 ms-0">
                      <ul
                        class="ratting-start p-0 m-0 list-inline text-warning d-flex align-items-center justify-content-left">
                        <li><i class="fa fa-star" aria-hidden="true"></i></li>
                        <li><i class="fa fa-star" aria-hidden="true"></i></li>
                        <li><i class="fa fa-star" aria-hidden="true"></i></li>
                        <li><i class="fa fa-star" aria-hidden="true"></i></li>
                        <li><i class="fa fa-star-half" aria-hidden="true"></i></li>
                      </ul>
                      <span class="text-white ms-2">@movie.Mark (imdb)</span>
                    </div>
                  </div>
                  <div class="p-0 mt-2 mb-2 list-inline d-flex flex-wrap movie-tag">
                      <h4 class="text-secondary text-white" href="view-all-movie.html">@movie.VietnamName</h4>
                  </div>
                  <div class="d-flex flex-wrap align-items-center text-white text-detail flex-wrap mb-4">
                    <span class="badge bg-secondary">@movie.Feature.Name</span>
                    <span class="ms-3 font-Weight-500 genres-info">@(movie.Time) mins</span>
                    <span class="ms-3 trending-year trending-year-list font-Weight-500 genres-info">
                      @movie.ProducedDate.ToString("dd/MM/yyyy")
                    </span>
                  </div>
                  <div class="d-flex align-items-center gap-4 flex-wrap mb-4">
                    <ul class="list-inline p-0 share-icons music-play-lists mb-n2 mx-n2">
                      <li class="share">
                        <span><i class="fa-solid fa-share-nodes"></i></span>
                        <div class="share-box">
                          <svg width="15" height="40" viewBox="0 0 15 40" class="share-shape" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M14.8842 40C6.82983 37.2868 1 29.3582 1 20C1 10.6418 6.82983 2.71323 14.8842 0H0V40H14.8842Z"
                              fill="#191919"></path>
                          </svg>
                          <div class="d-flex align-items-center">
                            <a href="#" class="share-ico"><i class="fa-brands fa-facebook-f"></i></a>
                            <a href="#" class="share-ico"><i class="fa-brands fa-twitter"></i></a>
                            <a href="#" class="share-ico"><i class="fa-solid fa-link"></i></a>
                          </div>
                        </div>
                      </li>
                      <li><span><i class="fa-solid fa-heart"></i></span></li>
                      <li><span><i class="fa-solid fa-plus"></i></span></li>
                      <li><span><i class="fa-solid fa-download"></i></span></li>
                    </ul>
                    <div class="movie-detail-select">
                      <button name="movieselect" class="text-primary form-control movie-select select2-basic-single js-states">
                            Play Now
                      </button>
                    </div>
                  </div>
                  <ul class="iq-blogtag list-unstyled d-flex flex-wrap align-items-center gap-3 p-0">
                    <li class="iq-tag-title text-primary mb-0">
                      <i class="fa fa-tags" aria-hidden="true"></i>
                      Tags:
                    </li>
                    @for(int i = 0; i < movie.Categories.Count(); i++) {
                         <li>
                             <a class="title" href="view-all-movie.html">@movie.Categories.ElementAt(i).Name</a>
                             @if(i < movie.Categories.Count() - 1) {
                                 <span class="text-secondary">,</span>
                             }
                         </li>
                    }
                  </ul>
                </div>
                <div class="trailor-video col-md-3 col-12 mt-lg-0 mt-4 mb-md-0 mb-1 text-lg-right">
                  <a data-fslightbox="html5-video" href="https://www.youtube.com/watchv=QCGq1epI9pQ"
                    class="video-open playbtn block-images position-relative playbtn_thumbnail">
                    <img src="@movie.Thumbnail"
                      class="attachment-medium-large size-medium-large wp-post-image" alt="" loading="lazy" />
                    <span class="content btn btn-transparant iq-button">
                      <i class="fa fa-play me-2 text-white"></i>
                      <span>Trailer Link</span>
                    </span>
                  </a>
                </div>
              </div>
            </div>
            <!-- Movie Description End --> <!-- Movie Source Start -->
            <div class="content-details trending-info">
              <ul
                class="iq-custom-tab tab-bg-gredient-center d-flex nav nav-pills align-items-center text-center mb-5 justify-content-center list-inline"
                role="tablist">
                <li class="nav-item">
                  <a class="nav-link active show" data-bs-toggle="pill" href="#description-01" role="tab"
                    aria-selected="true">
                    Description
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="pill" href="#review-01" role="tab" aria-selected="false">
                    Cast
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="pill" href="#source-01" role="tab" aria-selected="false">
                    Video
                  </a>
                </li>
              </ul>
              <div class="tab-content">
                <div id="description-01" class="tab-pane animated fadeInUp active show" role="tabpanel">
                  <div class="description-content">
                    <p>
                      @movie.Description
                    </p>
                  </div>
                </div>
                <div id="review-01" class="tab-pane animated fadeInUp" role="tabpanel">
                  <div class="position-relative swiper swiper-card" data-slide="4" data-laptop="4" data-tab="3"
                        data-mobile="2" data-mobile-sm="1" data-autoplay="false" data-loop="false" data-navigation="true"
                        data-pagination="true">
                        <ul class="list-inline swiper-wrapper">
                          @foreach(var people in movie.CastCharacteries) {
                            <li class="swiper-slide">
                                <div class="cast-images m-0 row align-items-center position-relative">
                                    <div class="col-4 img-box p-0">
                                        <img src="@people.Thumbnail" class="img-fluid" alt="image" loading="lazy">
                                    </div>
                                    <div class="col-8 block-description">
                                        <h6 class="iq-title">
                                          <a href="person-detail.html" tabindex="0">@people.NamePerson </a>
                                        </h6>
                                        <div class="video-time d-flex align-items-center my-2">
                                            <small class="text-white">@people.CharacterName</small>
                                        </div>
                                    </div>
                                </div>
                            </li>
                          }
                          
                        </ul>
                    </div>
                </div>
                <div id="source-01" class="tab-pane animated fadeInUp" role="tabpanel">
                  @{
                    if(movie.Feature.FeatureId != ((int)FeatureFilm.TVSeries)) 
                        await Html.RenderPartialAsync(ConstantComponent.DisplayMovieNormal, (IEnumerable<SeasonDTO>)movie.Seasons);
                    else
                        await Html.RenderPartialAsync(ConstantComponent.DisplayMovieTVSeries, (IEnumerable<SeasonDTO>)movie.Seasons);
                  }
                </div>
              </div>
            </div>
            <!-- Movie Source End -->
          </div>
        </div>
      </div>
    </div>

  </main>