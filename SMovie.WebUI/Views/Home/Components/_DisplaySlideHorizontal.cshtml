@using SMovie.Domain.Models
@model IEnumerable<MovieDetail>

<section class="tranding-tab-slider">
    <div class="container-fluid">
        <div class="row m-0 p-0">
            <div id="iq-trending" class="s-margin iq-tvshow-tabs iq-trending-tabs overflow-hidden">
                <div class="d-flex align-items-center justify-content-between px-0 px-md-3">
                    <h5 class="main-title text-capitalize mb-0">@ViewData["title"]</h5>
                </div>
                <div class="trending-contens position-relative ">
                    <div id="gallery-top" class="swiper gallery-thumbs" data-swiper="gallery-top">
                        <ul class="swiper-wrapper list-inline p-0 m-0 trending-slider-nav align-items-center ">
                            @foreach(var movie in Model)
                            {
                                <li class="swiper-slide">
                                    <a href="javascript:void(0);">
                                        <div class="movie-swiper position-relative">
                                            <img src="@movie.Thumbnail" alt="" loading="lazy"/>
                                        </div>
                                    </a>
                                </li>
                            }
                        </ul>
                    </div>
                    <div id="gallery-bottom" class="swiper trending-tab-slider mt-4" data-swiper="gallery-bottom">
                        <ul class="swiper-wrapper list-inline p-0 m-0 d-flex align-items-center trending-slider">
                            @for(int i = 0; i < Model.Count(); i++) {
                                var index = i + 1;
                                var movie = Model.ElementAt(i);
                                <li class="swiper-slide slider-big-img-@(i + 1) p-0">
                                    <div class="trending-tab-slider-image">
                                        <img src="@movie.Thumbnail" alt="trending-tab-slider-image" loading="lazy">
                                    </div>
                                    <div class="tranding-block position-relative">
                                        <div class="trending-custom-tab">
                                            <div class="tab-title-info position-relative">
                                                <ul class="trending-pills iq-custom-tab d-flex nav nav-pills justify-content-center align-items-center text-center list-inline" id="trending-tab-@(index)"
                                                    role="tablist">
                                                    <li class="nav-item" role="presentation">
                                                        <a class="nav-link active" id="trending-data-tab-@(index)" data-bs-toggle="pill" data-bs-target="#trending-data-@(index)"
                                                           aria-controls="trending-data-@index" role="tab" aria-selected="true">Overview</a>
                                                    </li>
                                                    <li class="nav-item" role="presentation">
                                                        <a class="nav-link" id="trending-data-tab-@(index + 1)" data-bs-toggle="pill" data-bs-target="#trending-data-@(index + 1)"
                                                           aria-controls="trending-data-@(index + 1)" role="tab" aria-selected="false">Episodes</a>
                                                    </li>
                                                    <li class="nav-item" role="presentation">
                                                        <a class="nav-link" id="trending-data-tab-@(index + 2)" data-bs-toggle="pill" data-bs-target="#trending-data-@(index + 2)"
                                                           aria-controls="trending-data-@(index + 2)" role="tab" aria-selected="false">Trailers</a>
                                                    </li>
                                                    <li class="nav-item" role="presentation">
                                                        <a class="nav-link" id="trending-data-tab-@(index + 3)" data-bs-toggle="pill" data-bs-target="#trending-data-@(index + 3)"
                                                           aria-controls="trending-data-@(index + 3)" role="tab" aria-selected="false">Cast Character</a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="tab-content trending-content" id="trending-tab-@(index)-content">
                                                @* Overview *@
                                                <div id="trending-data-@(index)" class="tab-pane fade show active" role="tabpanel" aria-labelledby="trending-data-tab-@(index)" tabindex="0">
                                                    <div class=" trending-info align-items-center w-100 animated fadeInUp iq-ltr-direction">

                                                        <h3 class="trending-text big-title text-uppercase texture-text">
                                                            @movie.EnglishName
                                                        </h3>
                                                        <div class="d-flex align-items-center text-white text-detail flex-wrap">
                                                            <span>@movie.TotalSeasons Seasons</span>
                                                            <span class="trending-year">@(movie.ProducedDate.Year)</span>
                                                        </div>
                                                        <div class="d-flex align-items-center flex-wrap series mb-4 gap-3">
                                                            <a href="javascript:void(0);">
                                                                <img src="~/home/images/movies/trending-label.html" class="img-fluid"
                                                                    loading="lazy" alt="">
                                                            </a>
                                                            <span class="text-gold">#@(i + 1) in Series Today</span>
                                                        </div>
                                                        <p class="trending-dec line-count-3">
                                                            @movie.Description
                                                        </p>
                                                        <div class="p-btns">
                                                            <div class="iq-button">
                                                                <a href="tv-show-detail.html"
                                                                   class="btn text-uppercase position-relative">
                                                                    <span class="button-text">Play Now</span>
                                                                    <i class="fa-solid fa-play"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="trending-list mt-4">
                                                            <div class="text-primary title">
                                                                Nation: <span class="text-body">
                                                                    @movie.Nation.Name
                                                                </span>
                                                            </div>
                                                            <div class="text-primary title">
                                                                Genres: <span class="text-body">
                                                                    @for(int j = 0; j < movie.Categories.Count(); j++)
                                                                    {
                                                                        @(movie.Categories.ElementAt(j).Name); @(j == movie.Categories.Count() - 1 ? "" : ", ")
                                                                    }
                                                                </span>
                                                            </div>
                                                            <div class="text-primary title">
                                                                Mark: <span class="text-body">
                                                                    @(movie.Mark)/10
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @* Episodes *@
                                                <div id="trending-data-@(index + 1)" class="tab-pane fade" role="tabpanel" aria-labelledby="trending-data-tab-@(index + 1)" tabindex="0">
                                                    <div class=" trending-info align-items-center w-100 animated fadeInUp iq-ltr-direction">

                                                        <h3 class="trending-text big-title text-uppercase texture-text">
                                                            @movie.VietnamName
                                                        </h3>
                                                        <div class="d-flex align-items-center text-white text-detail flex-wrap mb-4">
                                                            <span class="season_date ms-2">
                                                                @movie.TotalEpisodes Episodes
                                                            </span>
                                                            <span class="trending-year">@movie.ProducedDate.ToString("dd/MM/yyyy")</span>
                                                        </div>
                                                        <div class="iq-custom-select d-inline-block sea-epi mb-4">
                                                            <select name="cars" class="form-control select2-basic-single js-states season-select">
                                                                @movie.Seasons = movie.Seasons.OrderBy(s => s.SeasonNumber).ToList();
                                                                @foreach(var season in movie.Seasons)
                                                                {
                                                                    <option value="season@(season.SeasonNumber)">Season @(season.SeasonNumber)</option>
                                                                }
                                                            </select>
                                                        </div>
                                                        @{
                                                            IEnumerable<EpisodeDTO> episodes = movie.Seasons.FirstOrDefault()!.Episodes.OrderBy(s => s.EpisodeNumber);
                                                        }
                                                        <div class="position-relative swiper swiper-card" data-slide="4" data-laptop="3"
                                                             data-tab="2" data-mobile="2" data-mobile-sm="1" data-autoplay="false"
                                                             data-loop="false" data-navigation="true" data-pagination="true">
                                                            <ul class="p-0 swiper-wrapper m-0  list-inline">
                                                                @foreach(var episode in episodes)
                                                                {
                                                                    <li class="swiper-slide custom-slide-horizontal">
                                                                        <div class="episode-block h-100">
                                                                            <div class="block-image position-relative h-100">
                                                                                <a href="episode.html">
                                                                                    <img src="@movie.Thumbnail" class="img-fluid img-zoom h-100" alt="showImg-" loading="lazy">
                                                                                </a>
                                                                                <div class="episode-number">M@(episode.EpisodeNumber)</div>
                                                                                <div class="episode-play">
                                                                                    <a href="episode.html" tabindex="0"><i class="fa-solid fa-play"></i></a>
                                                                                </div>
                                                                            </div>
                                                                            <div class="epi-desc p-3">
                                                                                <div class="d-flex align-items-center justify-content-between mb-3">
                                                                                    <span class="border-gredient-left text-white rel-date">@(episode.DateUpdated == null ? episode.DateCreated.ToString("dd/MM/yyyy") : episode.DateUpdated?.ToString("dd/MM/yyyy"))</span>
                                                                                    <span class="text-primary run-time">@movie.Time mins</span>
                                                                                </div>
                                                                                <a href="episode.html">
                                                                                    <h5 class="epi-name text-white mb-0"> @episode.Name </h5>
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                }
                                                                
                                                            </ul>
                                                            <div class="swiper-button swiper-button-next"></div>
                                                            <div class="swiper-button swiper-button-prev"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @* Trailers *@
                                                <div id="trending-data-@(index + 2)" class="tab-pane fade" role="tabpanel" aria-labelledby="trending-data-tab-@(index + 2)" tabindex="0">
                                                    <div class=" trending-info align-items-center w-100 animated fadeInUp iq-ltr-direction text-center">
                                                        <h3 class="trending-text big-title text-uppercase texture-text mt-2">
                                                            Watch
                                                            Trailer
                                                        </h3>
                                                        <div class="episodes-contens mt-5">
                                                            <div class="tab-watch-trailer-container d-inline-block rounded-3 overflow-hidden">
                                                                <div class="tab-watch-trailer position-relative rounded-3 overflow-hidden">
                                                                    <img src="@movie.Thumbnail"
                                                                         class="trailer-image" alt="trailer-image" loading="lazy">
                                                                    <a href="@movie.Trailer"
                                                                       class="video-open playbtn text-decoration-none" tabindex="0">
                                                                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                                             xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                                             width="80px" height="80px" viewBox="0 0 213.7 213.7"
                                                                             enable-background="new 0 0 213.7 213.7" xml:space="preserve">
                                                                        <polygon class="triangle" fill="none" stroke-width="7"
                                                                                 stroke-linecap="round" stroke-linejoin="round"
                                                                                 stroke-miterlimit="10"
                                                                                 points="73.5,62.5 148.5,105.8 73.5,149.1 "></polygon>
                                                                        <circle class="circle" fill="none" stroke-width="7"
                                                                                stroke-linecap="round" stroke-linejoin="round"
                                                                                stroke-miterlimit="10" cx="106.8" cy="106.8" r="103.3">
                                                            </circle>
                                                         </svg>
                                                                        <span class="w-trailor text-uppercase"> Watch Trailer </span>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @* Cast character *@
                                                <div id="trending-data-@(index + 3)" class="tab-pane fade" role="tabpanel" aria-labelledby="trending-data-tab-@(index + 3)" tabindex="0">
                                                    <div class=" trending-info align-items-center w-100 animated fadeInUp iq-ltr-direction">
                                                        <h3 class="trending-text big-title text-uppercase texture-text mb-5">
                                                            Characters
                                                        </h3>
                                                        <div class="position-relative swiper swiper-card" data-slide="4" data-laptop="3"
                                                             data-tab="2" data-mobile="1" data-mobile-sm="1" data-autoplay="false"
                                                             data-loop="false" data-navigation="true" data-pagination="true">
                                                            <ul class="p-0 swiper-wrapper m-0  list-inline">
                                                                @foreach(var character in movie.CastCharacteries)
                                                                {
                                                                    <li class="swiper-slide custom-slide-horizontal">
                                                                        <div class="episode-block h-100">
                                                                            <div class="block-image position-relative h-100">
                                                                                <a href="episode.html">
                                                                                    <img src="@character.Thumbnail" class="img-fluid img-zoom" alt="showImg-" loading="lazy">
                                                                                </a>
                                                                            </div>
                                                                            <div class="epi-desc p-3">
                                                                                <div class="d-flex align-items-center justify-content-between mb-3">
                                                                                    <span class="border-gredient-left text-white rel-date">@character.NamePerson</span>
                                                                                </div>  
                                                                                <div>
                                                                                    <h6 class="epi-name text-white mb-0"> @character.CharacterName </h6>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                }
                                                                
                                                            </ul>
                                                            <div class="swiper-button swiper-button-next"></div>
                                                            <div class="swiper-button swiper-button-prev"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                index = index + 3;
                            }
                        </ul>
                        <div class="swiper-arrow swiper-button-next">
                            <i class="fa-solid fa-chevron-right"></i>
                        </div>
                        <div class="swiper-arrow swiper-button-prev">
                            <i class="fa-solid fa-chevron-left"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>